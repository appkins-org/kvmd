# Maintainer: Nicholas Atkins <nbatkins@gmail.com>

pkgname=kvmd-ext
pkgver=61b5659

pkgrel=1
pkgdesc='Pi KVM Extension Pack'
arch=('any')
url='https://github.com/appkins-org/kvmd'
license=('MIT')
makedepends=('git')
provides=('kvmd-ext')
conflicts=('kvmd-ext')
source=('git+https://github.com/appkins-org/kvmd.git')
sha256sums=('SKIP')

dldir=cpp_redis

pkgver() {
  cd $dldir

  git describe --always | sed -E 's/([^-]*-g)/r\1/;s/-/./g'
}

build() {
  mkdir -p $dldir/build && cd $dldir && git submodule init && git submodule update && cd build

  #bundle install --path .
  #export PATH="$(find $PWD/ruby -maxdepth 2 -type d -name bin):$PATH"

  cmake -DCMAKE_BUILD_TYPE=Release ..
  make
}

package() {
  cd $dldir/build
  sudo make install
}

# vim: ts=2 sw=2 et: